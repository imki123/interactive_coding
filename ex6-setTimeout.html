<html>
  <body>
    <script>
      let time1 = Date.now()
      let count = 1
      let time2 = Date.now()
      let count2 = 1

      //setInterval 반복 
      /* let interval = setInterval(function delay(){
        for(let i=0; i<1000000000; i++); //대략 650ms
        let now = Date.now()
        console.log(count++, Date.now() -time1)
        time1 = now
        if(count > 10) clearTimeout(interval)
      }, 1000) */
      
      //setTimeout 중첩. 함수 실행 이후 지연시간 보장.
      /* let timerId = setTimeout(function delay2(){
        for(let i=0; i<1000000000; i++); //대략 650ms
        let now = Date.now()
        console.log(count2++, now -time2)
        time2 = now
        timerId = setTimeout(delay2, 1000)
        if(count2 > 10) clearTimeout(timerId)
      },1000) */

      /* setInterval은 시간을 보장하는가? */
      // 보장할 수 없다. 실행시간이 오래걸리는 작업이 완료될 때까지
      // 대기하고 인터벌, 타임아웃이 실행된다.
      let tick = 1
      let time3 = Date.now()
      let itv1sec = setInterval(()=>{
        let now = Date.now()
        console.log(tick++, Date.now() -time1)
        time1 = now
      },1000)
      
      let timer = setTimeout(function delay(){
        console.log('delay start')
        console.time('delay')
        for(let i=0; i<4000000000; i++); //대략 4800 ~ 1000ms
        console.timeEnd('delay')
        timer = setTimeout(delay, 2000)
      }, 2000)
    </script>
  </body>
</html>